# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`grafana_alloy`](#grafana_alloy): Install and configure Grafana Alloy
* [`grafana_alloy::repo`](#grafana_alloyrepo): Configure Grafana repo

#### Private Classes

* `grafana_alloy::config`: Configure the Alloy service
* `grafana_alloy::install`: Install the Alloy package
* `grafana_alloy::service`: Manage the Alloy service

## Classes

### <a name="grafana_alloy"></a>`grafana_alloy`

classes:
  - grafana_alloy

grafana_alloy::config: |
  // Logging
  logging {
    level = "warn"
  }

  prometheus.exporter.unix "default" {
    include_exporter_metrics = true
    disable_collectors       = ["mdadm"]
  }

  // Prometheus scrape
  prometheus.scrape "default" {
    targets = array.concat(
      prometheus.exporter.unix.default.targets,
      [{
        // Self-collect metrics
        job         = "alloy",
        __address__ = "%{facts.networking.ip}:12345",
      }],
    )
    scrape_interval = "30s"
    forward_to = [prometheus.remote_write.mimir.receiver]
  }

  // Remote write to Mimir
  prometheus.remote_write "mimir" {
    endpoint {
      url = "https://mimir.example.com/api/v1/push"
      headers = {
        "X-Scope-OrgID" = "%{::environment}",
      }
    }
  }
classes:
  - grafana_alloy

grafana_alloy::config::custom_args:
  - "--server.http.listen-addr=%{facts.networking.ip}:12345"

#### Examples

##### To customize the Alloy configuration, you can use the `config` parameter

```puppet

```

##### If you want to pass arguments to the run commands, you can add the following content into your hieradata file:

```puppet

```

#### Parameters

The following parameters are available in the `grafana_alloy` class:

* [`config`](#config)
* [`manage_package_repo`](#manage_package_repo)

##### <a name="config"></a>`config`

Data type: `Optional[Variant[String[1], Sensitive[String[1]]]]`

The contents of the configuration file, if any

Default value: ``undef``

##### <a name="manage_package_repo"></a>`manage_package_repo`

Data type: `Boolean`

Installs the package repositories

Default value: ``true``

### <a name="grafana_alloyrepo"></a>`grafana_alloy::repo`

Configure Grafana repo

